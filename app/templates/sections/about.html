<!-- О компании -->
<section id="about" class="about-section section {% if about.background.type == 'gradient' %}section-alt{% endif %}"
         {% if about.background_image_url %}
         style="background-image: url('{{ about.background_image_url }}'); background-size: cover; background-position: center; position: relative;"
         {% elif about.background.type == 'image' and about.background.image_url %}
         style="background-image: url('{{ about.background.image_url }}'); background-size: cover; background-position: center; position: relative;"
         {% elif about.background.type == 'gradient' and about.background.gradient %}
         style="background: {{ about.background.gradient }}; position: relative;"
         {% endif %}>
    {% if about.background_image_url %}
    <div class="section-background-overlay" style="background-color: {{ about.background_overlay_color if about.background_overlay_color else '#FFFFFF' }}; opacity: {{ about.background_overlay_opacity if about.background_overlay_opacity is not none else 0.8 }};"></div>
    {% elif about.background.type in ['image', 'gradient'] and about.background.overlay_opacity > 0 %}
    <div class="section-background-overlay" style="background-color: {{ about.background.overlay_color if about.background.type == 'image' else 'rgba(255,255,255,' + (about.background.overlay_opacity|string) + ')' }}; opacity: {{ about.background.overlay_opacity if about.background.type == 'image' else 1 }};"></div>
    {% endif %}
    <div class="container">
        <div class="section-header" data-aos="fade-up">
            <h2 class="section-title">{{ about.title }}</h2>
            <p class="section-subtitle">{{ about.philosophy }}</p>
        </div>
        
        <div class="about-content">
            <div class="about-text" data-aos="fade-right">
                <p class="lead">{{ about.description }}</p>
                
                <div class="about-features">
                    {% for feature in about.features %}
                    <div class="feature-item">
                        {% if feature.image_url %}
                        <div class="feature-image">
                            <img src="{{ feature.image_url }}" alt="{{ feature.title[current_locale] if feature.title is mapping else feature.title }}" class="feature-img">
                        </div>
                        {% else %}
                        <div class="feature-icon">
                            {% if feature.icon == 'aura' %}
                            <svg width="48" height="48" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="color: #A67C52;">
                                <circle cx="12" cy="12" r="8" stroke="currentColor" stroke-width="1.5"/>
                                <circle cx="12" cy="12" r="4" stroke="currentColor" stroke-width="1.5"/>
                                <path d="M12 8v4l2 1" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                            </svg>
                            {% elif feature.icon == 'dna' %}
                            <svg width="48" height="48" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="color: #A67C52;">
                                <path d="M12 2L8 4l4 2 4-2-4-2z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M8 4v4l4 2 4-2V4M8 8l4 2 4-2M8 12l4 2 4-2" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                            {% else %}
                            <svg width="48" height="48" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="color: #A67C52;">
                                <circle cx="12" cy="12" r="8" stroke="currentColor" stroke-width="1.5"/>
                                <path d="M12 8v4l2 1" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                            </svg>
                            {% endif %}
                        </div>
                        {% endif %}
                        {# Поддержка как старого формата (строка), так и нового (dict с ru/lv/en) #}
                        {% set feature_title = feature.title[current_locale] if feature.title is mapping else feature.title %}
                        {% set feature_desc = feature.description[current_locale] if feature.description is mapping else feature.description %}
                        <h3 class="feature-title">{{ feature_title }}</h3>
                        <p class="feature-description">{{ feature_desc }}</p>
                    </div>
                    {% endfor %}
                </div>
                
                <div class="about-cta">
                    <a href="#personalization" class="btn btn-primary">
                        {{ get_content('personalization', 'learn_more_button', current_locale) or 'Узнать больше о технологиях' }}
                    </a>
                </div>
            </div>
            
            <div class="about-visual" data-aos="fade-left">
                {% set about_visual_image = about.background.image_url if about.background and about.background.image_url else url_for('static', filename='img/hero.png') %}
                <figure class="about-image-wrapper">
                    <img src="{{ about_visual_image }}" alt="OilFusion - визуализация технологий AuraCloud® 3D" class="about-image">
                </figure>
            </div>
        </div>
    </div>
</section>




